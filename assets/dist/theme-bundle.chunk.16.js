(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{739:function(t,i,e){"use strict";e.r(i),function(t){e.d(i,"default",(function(){return d}));var o=e(117),s=e(842),a=e(843),n=e(844);function r(t,i){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var d=function(i){var e,o;function d(){return i.apply(this,arguments)||this}o=i,(e=d).prototype=Object.create(o.prototype),e.prototype.constructor=e,r(e,o);var c=d.prototype;return c.onReady=function(){this.initProductsByCategorySection(),this.initSpecialProductsTabsSection(),this.initMainCarouselSection(),this.initBrandsCarouselSection()},c.initProductsByCategorySection=function(){this.context.hasProductsByCategorySortingTabs&&Object(s.a)()},c.initSpecialProductsTabsSection=function(){this.context.hasSpecialProductsTabs&&Object(a.a)({context:this.context})},c.initMainCarouselSection=function(){if(this.context.hasMainCarousel){Object(n.a)(t("[data-slick]"));var i=t("body.papaSupermarket-layout--default .emthemesModez-verticalCategories--open"),e=function(){t(".heroCarousel-slide").css("min-height",t(window).width()>768?i.height()+20+"px":"")};i.length>0&&(e(),t(window).on("resize",(function(){return e()})))}},c.initBrandsCarouselSection=function(){t("[data-emthemesmodez-brand-carousel]").slick({dots:!1,infinite:!1,mobileFirst:!0,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:1260,settings:{slidesToScroll:2,slidesToShow:5}},{breakpoint:800,settings:{slidesToScroll:2,slidesToShow:5}},{breakpoint:550,settings:{slidesToScroll:2,slidesToShow:3}}]})},d}(o.a)}.call(this,e(1))},797:function(t,i,e){var o=e(65),s=e(68);t.exports=function(t,i,e){var a=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return s(e)&&(a="leading"in e?!!e.leading:a,n="trailing"in e?!!e.trailing:n),o(t,i,{leading:a,maxWait:i,trailing:n})}},842:function(t,i,e){"use strict";(function(t){e.d(i,"a",(function(){return c}));var o=e(797),s=e.n(o),a=e(10),n=e(92),r=function(){function i(i){var e=i.id,o=i.index,s=void 0===o?0:o,a=i.sort,n=void 0===a?"":a,r=i.limit,d=void 0===r?"":r,c=i.$parent;this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.id=e,this.index=s,this.sort=n,this.limit=d,this.$parent=c,this.$scope=t('<div class="emthemesModez-productsByCategoryTabs-loading"></div>'),this.$loadMore=t(),this.$collapse=t(),this.$loader=t(),this.$parent.append(this.$scope),this.request()}var e=i.prototype;return e.request=function(){var i=this,e=this.limit?"&limit="+this.limit:"",o=this.sort?"&sort="+this.sort:"";a.b.api.getPage("/categories.php?category="+this.id+e+o,{template:"papa-supermarket/products-by-category-sorting-tabs/section"},(function(e,o){if(e||!o||o.error)i.$scope.remove();else{var s=t(o);i.$scope.replaceWith(s),i.$scope=s,i.$loader=i.$scope.find(".loader"),i.initTabs(),i.initSlick(),i.initBanner(),i.initButtons()}}))},e.loadProducts=function(i){var e=this,o=i.sort,s=void 0===o?"":o,n=i.page,r=void 0===n?"":n,d=i.$content,c=this.limit?"&limit="+this.limit:"",l=s?"&sort="+s:"",h=r?"&page="+r:"";this.$loader.addClass("loading"),a.b.api.getPage("/categories.php?category="+this.id+c+l+h,{template:"papa-supermarket/products-by-category-sorting-tabs/products"},(function(i,o){if(e.$loader.removeClass("loading"),!i&&o){var s=t(o),a=d.find("[data-current-page]");a.length>0?(a.data({currentPage:s.data("currentPage"),hasNextPage:Boolean(s.data("hasNextPage"))}),a.find(".productGrid").append(s.find(".productGrid").children())):d.html(o).data("loaded",!0),e.initSlick(),s.data("hasNextPage")?e.$loadMore.show():e.$loadMore.hide(),s.data("currentPage")>1?e.$collapse.show():e.$collapse.hide()}}))},e.initTabs=function(){var i=this;Object(n.a)(this.$scope),this.$scope.find(".tab-content.is-active").data("loaded",!0),t("[data-tab]",this.$scope).on("toggled",(function(e,o){var s=t(t(o).find("a").attr("href"));if(s.data("loaded")){var a=s.find("[data-current-page]");return a.data("hasNextPage")?i.$loadMore.show():i.$loadMore.hide(),void(Number(a.data("currentPage"))>1?i.$collapse.show():i.$collapse.hide())}i.$loadMore.hide(),i.$collapse.hide(),i.loadProducts({sort:s.data("sort"),$content:s})}))},e.initSlick=function(){t("[data-slick]",this.$scope).on("init",(function(i){return setTimeout((function(){t("[data-slick-nested]",i.target).each((function(i,e){t(e).slick(t(e).data("slickNested"))}))}),200)})).on("breakpoint",(function(i){return setTimeout((function(){t("[data-slick-nested]",i.target).slick("setPosition")}),200)})).slick()},e.initBanner=function(){var t=this.$scope.find("[data-banner] img"),i="/product_images/uploaded_images/products-by-category-"+(this.index+1)+".jpg?c=2";t.hasClass("lazyload")?t.attr("data-src",i):t.attr("src",i)},e.initButtons=function(){this.$loadMore=this.$scope.find(".loadMore").hide(),this.$collapse=this.$scope.find(".collapse").hide(),this.$scope.find(".tab-content.is-active [data-current-page]").data("hasNextPage")&&this.$loadMore.show(),this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse)},e.onLoadMore=function(t){t.preventDefault();var i=this.$scope.find(".tab-content.is-active"),e=i.find("[data-current-page]"),o=i.find(".product.hide");if(o.length>0)return o.show().removeClass("hide"),this.$collapse.show(),void(e.data("hasNextPage")||this.$loadMore.hide());if(e.data("hasNextPage")){var s=i.data("sort"),a=Number(e.data("currentPage"))+1;this.loadProducts({sort:s,page:a,$content:i})}else this.$loadMore.hide()},e.onCollapse=function(i){if(i.preventDefault(),this.limit){var e=this.$scope.find(".tab-content.is-active");e.find(".product").slice(this.limit).hide().addClass("hide").length>0&&this.$loadMore.show(),t("html, body").animate({scrollTop:e.offset().top},500)}this.$collapse.hide()},i}(),d=function(){function i(t){this.$scope=t,this.lazy=this.$scope.is("[data-lazy]"),this.loaded=!1,this.onCheckViewport=s()(this.onCheckViewport.bind(this),100),this.bindEvents(),this.lazy||this.load()}var e=i.prototype;return e.load=function(){var t=this;this.loaded=!0;var i=this.$scope.data("sort"),e=this.$scope.data("limit");String(this.$scope.data("pbcstGroup")).split(",").map((function(o,s){return new r({id:o.trim(),index:s,sort:i,limit:e,$parent:t.$scope})}))},e.bindEvents=function(){var i=this;t("body").one("beforeload.instantload",(function(){return i.unbindEvents()})),this.lazy&&t(window).on("load resize scroll",this.onCheckViewport)},e.unbindEvents=function(){t(window).off("load resize scroll",this.onCheckViewport)},e.onCheckViewport=function(){if(this.loaded)t(window).off("load resize scroll",this.onCheckViewport);else if(this.$scope.is(":visible")){var i=this.$scope.offset().top,e=i+this.$scope.outerHeight(),o=t(window).scrollTop();i-300<o+t(window).innerHeight()&&e+300>o&&this.load()}},i}();function c(i){void 0===i&&(i="[data-pbcst-group]"),t(i).each((function(i,e){return new d(t(e))}))}}).call(this,e(1))},843:function(t,i,e){"use strict";(function(t){e.d(i,"a",(function(){return r}));var o=e(797),s=e.n(o),a=e(10),n=function(){function i(t,i){this.$scope=t,this.context=i,this.$viewportCheck=t.find("[data-viewport-check]"),this.$loading=t.find(".loading").hide(),this.$loadMore=t.find(".loadMore").hide(),this.$collapse=t.find(".collapse").hide(),this.defaultProductsCount=this.context.themeSettings.specialProductsTab_lazy_count+this.context.themeSettings.specialProductsTab_init_count,this.onCheckViewport=s()(this.onCheckViewport.bind(this),100),this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.onTabToggled=this.onTabToggled.bind(this),this.context.themeSettings.specialProductsTab_more&&this.$loadMore.show(),this.bindEvents()}var e=i.prototype;return e.bindEvents=function(){var i=this;t("body").one("beforeload.instantload",(function(){return i.unbindEvents()})),this.$viewportCheck.length>0&&t(window).on("load resize scroll",this.onCheckViewport),this.context.themeSettings.specialProductsTab_more&&this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse),t("[data-tab]",this.$scope).on("toggled",this.onTabToggled)},e.unbindEvents=function(){t(window).off("load resize scroll",this.onCheckViewport),this.$loadMore.off("click",this.onLoadMore),this.$collapse.off("click",this.onCollapse),t("[data-tab]",this.$scope).off("toggled",this.onTabToggled)},e.onCheckViewport=function(){var i=this;this.$viewportCheck.each((function(e,o){var s=t(o);if(s.is(":visible")){var a=s.offset().top,n=a+s.outerHeight(),r=t(window).scrollTop();a-250<r+t(window).innerHeight()&&n+250>r&&(i.loadViewportProducts(s.data("viewportCheck"),s.closest(".tab-content").find(".productGrid, .productList, .productCarousel")),i.$viewportCheck=i.$viewportCheck.not(s),s.remove())}}))},e.onLoadMore=function(i){var e=this;i.preventDefault();var o=this.$scope.find(".tab-content.is-active");if(o.data("loadedMore")){var s=o.find(".product, .productCarousel-slide").filter(":hidden");s.slice(0,this.defaultProductsCount).show(),s.is(":hidden")||this.$loadMore.hide(),this.$collapse.show()}else{o.data("loadedMore",!0);var n={products:{}};switch(o.data("productType")){case"featured":n.products.featured={limit:100};break;case"top":n.products.top_sellers={limit:100};break;case"new":default:n.products.new={limit:100}}this.$loading.show(),this.$loadMore.attr("disabled",!0),a.b.api.getPage(this.context.urls.search,{template:"papa-supermarket/special-products-tabs/products",config:n},(function(i,s){if(e.$loading.hide(),e.$loadMore.removeAttr("disabled"),!i&&s){var a=o.find(".product, .productCarousel-slide").map((function(i,e){return t(e).data("productId")})).get(),n=t(s).find(".product, .productCarousel-slide").filter((function(i,e){return-1===a.indexOf(t(e).data("productId"))}));n.slice(e.defaultProductsCount).hide(),o.find(".productGrid, .productList, .productCarousel").append(n),n.is(":hidden")||e.$loadMore.hide(),n.length>0&&e.$collapse.show()}}))}},e.onCollapse=function(i){i.preventDefault();var e=this.$scope.find(".tab-content.is-active"),o=e.find(".product, .productCarousel-slide");o.slice(this.defaultProductsCount).hide(),this.$collapse.hide(),o.length>this.defaultProductsCount&&this.$loadMore.show(),t("html, body").animate({scrollTop:e.offset().top})},e.onTabToggled=function(i,e){var o=t(t("a",e).attr("href"));t("[data-slick]",o).slick("setPosition"),this.$viewportCheck.length>0&&this.onCheckViewport();var s=o.find(".product, .productCarousel-slide"),a=s.filter(":visible").length;this.context.themeSettings.specialProductsTab_more&&(!o.data("loadedMore")||s.is(":hidden")?this.$loadMore.show():this.$loadMore.hide(),a>this.defaultProductsCount?this.$collapse.show():this.$collapse.hide())},e.loadViewportProducts=function(i,e){var o=this,s=this.defaultProductsCount,n={products:{}};switch(i){case"featured":n.products.featured={limit:s};break;case"top":n.products.top_sellers={limit:s};break;case"new":default:n.products.new={limit:s}}this.$loading.show(),a.b.api.getPage(this.context.urls.search,{template:"papa-supermarket/special-products-tabs/products",config:n},(function(i,s){if(o.$loading.hide(),!i&&s){var a=t(s).find(".product, .productCarousel-slide");e.empty().append(a)}}))},i}();function r(i){var e=i.selector,o=void 0===e?"[data-special-products-tabs]":e,s=i.context;t(o).each((function(i,e){var o=t(e);o.data("specialProductsTabsInstance")||o.data("specialProductsTabsInstance",new n(o,s))}))}}).call(this,e(1))},844:function(t,i,e){"use strict";(function(t){e.d(i,"a",(function(){return d}));var o,s=e(93),a=1,n=function(){function i(i){this.$slick=t(i),this.$videos=this.$slick.find("[data-youtube]"),this.onSlickInit=this.onSlickInit.bind(this),this.onSlickBeforeChange=this.onSlickBeforeChange.bind(this),this.onSlickAfterChange=this.onSlickAfterChange.bind(this),this.onPlayerReady=this.onPlayerReady.bind(this),this.onPlayerStateChange=this.onPlayerStateChange.bind(this),this.bindEvents()}var e=i.prototype;return e.bindEvents=function(){this.$slick.hasClass("slick-initialized")&&this.onSlickInit(),this.$slick.on("init",this.onSlickInit),this.$slick.on("beforeChange",this.onSlickBeforeChange),this.$slick.on("afterChange",this.onSlickAfterChange)},e.onPlayerReady=function(i){var e=this;t(i.target.getIframe()).closest(".slick-slide").data("youtube-player",i.target),o.matches&&setTimeout((function(){t(i.target.getIframe()).closest(".slick-slide").hasClass("slick-active")&&(e.$slick.is("[data-youtube-mute]")&&i.target.mute(),e.$slick.is("[data-youtube-autoplay]")&&(e.$slick.slick("slickPause"),i.target.playVideo()))}),200)},e.onPlayerStateChange=function(t){t.data===YT.PlayerState.PLAYING&&(this.$slick.addClass("slick-video-playing"),this.$slick.slick("slickPause")),t.data===YT.PlayerState.PAUSED&&this.$slick.removeClass("slick-video-playing"),t.data===YT.PlayerState.ENDED&&(this.$slick.removeClass("slick-video-playing"),this.$slick.slick("slickPlay"),this.$slick.slick("slickNext"))},e.onSlickInit=function(){var i=this;this.$videos.each((function(e,o){var s=t(o),n="youtube_player_"+a++;s.attr("id",n);new YT.Player(n,{videoId:s.data("youtube"),wmode:"transparent",playerVars:{controls:0,disablekb:1,enablejsapi:1,fs:0,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"transparent"},events:{onReady:i.onPlayerReady,onStateChange:i.onPlayerStateChange}})}))},e.onSlickBeforeChange=function(){var t=this.$slick.find(".slick-slide.slick-active").data("youtube-player");t&&t.stopVideo()},e.onSlickAfterChange=function(){if(this.$slick.slick("slickPlay"),o.matches){var t=this.$slick.find(".slick-slide.slick-active").data("youtube-player");t&&(this.$slick.is("[data-youtube-mute]")&&t.mute(),this.$slick.is("[data-youtube-autoplay]")&&(this.$slick.slick("slickPause"),t.playVideo()))}},i}();function r(i){i.each((function(i,e){var o=t(e);o.find("[data-youtube]").length>0&&(o.addClass("slick-slider--video"),new n(e))}))}function d(t){if(t.find("[data-youtube]").length>0)if(o=Object(s.a)("medium"),void 0===window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=r.bind(window,t);var i=document.createElement("script");i.src="https://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(i,e)}else r(t)}}).call(this,e(1))}}]);
//# sourceMappingURL=theme-bundle.chunk.16.js.map